<!--more-->

<p>分层的核心目的在于：分离关注点。</p>

<p>我们所得到的模块，关键的不止是他能做什么，还有他不能做什么。而往往他不能做什么更加关键。</p>

<p>分层是表示将功能进行有序的分组：应用程序专用功能位于上层，跨越应用程序领域的功能位于中层，而配置环境专用功能位于低层。分层从逻辑上将子系统划分成许多集合，而层间关系的形成要遵循一定的规则。</p>

<p>分层是表示将功能进行有序的分组：应用程序专用功能位于上层，跨越应用程序领域的功能位于中层，而配置环境专用功能位于低层。分层从逻辑上将子系统划分成许多集合，而层间关系的形成要遵循一定的规则。通过分层，可以限制子系统间的依赖关系，使系统以更松散的方式耦合，从而更易于维护。子系统的分组标准包含以下几条规则可见度。各子系统只能与同一层及其下一层的子系统存在依赖关系。</p>

<p>可见度。各子系统只能与同一层及其下一层的子系统存在依赖关系。</p>

<p>易变性。最上层放置随用户需求的改变而改变的元素。最底层放置随实施平台（硬件、语言、操作系统、数据库等）的改变而改变的元素。中间的夹层放置广泛适用于各种系统和实施环境的元素。如果在这些大类中进一步划分有助于对模型进行组织，则添加更多的层。</p>

<p>通用性。一般将抽象的模型元素放置在模型的低层。如果它们不针对于具体的实施，则倾向于将其放置在中间层。
层数。对于小型系统，三层就足够了。对于复杂系统，通常需要 5-7 层。无论复杂程度如何，如果超过 10 层，就需要慎重考虑了。层数越多，越需慎重。以下列出了一些经验法则：</p>

<table>
  <thead>
    <tr>
      <th>类的数量</th>
      <th>层数</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0 - 10</td>
      <td>无需分层</td>
    </tr>
    <tr>
      <td>10 - 50</td>
      <td>2 层</td>
    </tr>
    <tr>
      <td>25 - 150</td>
      <td>3 层</td>
    </tr>
    <tr>
      <td>100 - 1000</td>
      <td>4 层</td>
    </tr>
  </tbody>
</table>

<p>粒度问题</p>
